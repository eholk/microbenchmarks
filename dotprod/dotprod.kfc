;; This is known to work with Harlan version
;; d0b78bc03c7d816e6e995a5407018a1e3896355e

(module
  (import ffi)

  (define (harlan_dot N pa pb)
    (let ((a (import-float-vec pa N))
          (b (import-float-vec pb N)))
      (reduce + (kernel ((a a) (b b)) (* a b))))))